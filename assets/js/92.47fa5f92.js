(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{260:function(s,e,a){"use strict";a.r(e);var t=a(0),n=Object(t.a)({},(function(){this._self._c;return this._m(0)}),[function(){var s=this,e=s._self._c;return e("div",{staticClass:"content"},[e("p",[s._v("BPF（Berkeley Packet Filter）是一个内核功能，它允许用户定义和注入自定义代码以处理网络数据包。在Linux内核中，BPF通常通过内核配置选项启用。")]),s._v(" "),e("p",[s._v("要启用BPF，可以使用以下步骤：")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("确认内核版本是否支持BPF。BPF在Linux内核版本3.18及更高版本中可用。可以使用以下命令检查内核版本：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("uname -r\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("确认内核配置中已启用BPF。可以使用以下命令检查内核配置：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("zcat /proc/config.gz | grep CONFIG_BPF\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("如果输出中包含“CONFIG_BPF=y”，则表示BPF已启用。如果输出为空，则表示BPF未启用。")])]),s._v(" "),e("li",[e("p",[s._v("如果BPF未启用，则需要重新编译内核并启用BPF选项。可以使用以下命令下载内核源代码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git clone https://github.com/torvalds/linux.git\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后，进入源代码目录并使用以下命令启用BPF选项：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("make menuconfig\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在菜单中找到“Networking support” -> “Networking options” -> “BPF-based packet filtering framework”，并将其选中。然后保存并退出菜单配置。")])]),s._v(" "),e("li",[e("p",[s._v("重新编译内核并安装。可以使用以下命令编译内核：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("make -j$(nproc)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后，安装内核并重启系统：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo make modules_install install\nsudo reboot\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("确认BPF已启用。可以使用第2步中的命令再次检查内核配置，或者使用以下命令检查BPF是否已加载：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("lsmod | grep bpf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("如果输出中包含“bpf”，则表示BPF已启用。")])])]),s._v(" "),e("p",[s._v("请注意，启用BPF需要重新编译内核，这可能需要一些时间和技能。因此，如果您不确定如何执行这些步骤，请谨慎操作。")])])}],!1,null,null,null);e.default=n.exports}}]);